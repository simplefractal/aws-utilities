# see docs https://serverless.com/framework/docs/providers/aws/guide/serverless.yml/
provider:
  name: aws
  runtime: python3.6
  role: ${env:${opt:stage, 'dev'}_LAMBDA_ROLE}   # IAM role used by function (granting it a permission set)
  memorySize: 2048 # Raise or lower within function yml as needed
  timeout: 300 # In seconds. Max 900
  vpc: # https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html
    securityGroupIds:
      - ${env:VPC_SECURITY_GROUP}
    subnetIds:
      - ${env:VPC_SUBNET_ID}

plugins:
  - serverless-python-requirements   # Bundles dependencies from requirements.txt when deploying

package:
  individually: true
  exclude: # You will need to include necessary files from your service's YAML
    - "./**"

custom:
  pythonRequirements:
    dockerizePip: non-linux
  enabled:
    dev: false
    prod: true
  enabled_dev:
    dev: true
    prod: false
  block_recipient:
    dev: 'True'
    prod: 'False'
